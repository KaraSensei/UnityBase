# Этап 1: Базовая структура Unity и подготовка проекта

## Цель этапа
Организовать проект для удобной работы, создать все необходимые сцены и подготовить структуру префабов. Это основа, на которой будет строиться вся игра.

---

## Урок 1.1: Создание структуры папок

### Что мы делаем
Создаем четкую структуру папок, чтобы легко находить нужные файлы и поддерживать порядок в проекте.

### Пошаговая инструкция

#### Шаг 1: Основные папки
В окне **Project** (внизу экрана) убедитесь, что вы находитесь в папке `Assets`. Создайте следующие папки:

1. **Scripts** - для всех скриптов C#
2. **ScriptableObjects** - для данных игры (оружие, враги, квесты и т.д.)
3. **Prefabs** - для префабов (готовых объектов)
4. **Materials** - для материалов (текстуры и визуальные эффекты)
5. **Textures** - для текстур (изображения)
6. **Models** - для 3D моделей
7. **Audio** - для звуков и музыки
8. **Animations** - для анимаций

**Как создать папку:**
- Правый клик в окне Project → **Create** → **Folder**
- Или используйте горячую клавишу: выделите папку Assets, нажмите `Ctrl+Shift+N`

#### Шаг 2: Подпапки для Scripts
В папке `Scripts` создайте следующие подпапки:

- **Core** - ядро игры (менеджеры)
- **Player** - все, что связано с игроком
- **Weapons** - система оружия
- **Inventory** - система инвентаря
- **NPCs** - неигровые персонажи
- **Quests** - система квестов
- **Enemies** - враги
- **Bosses** - боссы
- **Loot** - система лута
- **SaveSystem** - система сохранения
- **Settings** - настройки игры
- **UI** - пользовательский интерфейс

#### Шаг 3: Подпапки для ScriptableObjects
В папке `ScriptableObjects` создайте:

- **Items** - данные предметов
- **Weapons** - данные оружия
- **Enemies** - данные врагов
- **Bosses** - данные боссов
- **NPCs** - данные NPC
- **Quests** - данные квестов
- **LootTables** - таблицы лута
- **Player** - данные игрока

#### Шаг 4: Подпапки для Prefabs
В папке `Prefabs` создайте:

- **Player** - префаб игрока
- **Enemies** - префабы врагов
- **Bosses** - префабы боссов
- **NPCs** - префабы NPC
- **Weapons** - префабы оружия
- **Items** - префабы предметов
- **UI** - префабы UI элементов

#### Шаг 5: Подпапки для Audio
В папке `Audio` создайте:

- **Music** - фоновая музыка
- **SFX** - звуковые эффекты

### Советы и рекомендации

#### Для 2D игр
Если вы делаете 2D игру, добавьте также:
- **Sprites** - для спрайтов (2D изображения)
- **Tilemaps** - для тайлмапов (если используете)

#### Для разных жанров
- **RPG игры**: структура остается такой же
- **Платформеры**: можете добавить папку **Platforms** в Prefabs
- **Шутеры**: можете добавить папку **Projectiles** в Prefabs
- **Головоломки**: можете добавить папку **Puzzles** в Scripts

#### Общие советы
1. **Именование**: Используйте понятные названия на английском языке
2. **Организация**: Не создавайте слишком много вложенных папок (максимум 3-4 уровня)
3. **Гибкость**: Структуру можно изменять по ходу разработки, но лучше планировать заранее

### Проверка
После создания всех папок ваша структура должна выглядеть примерно так:

```
Assets/
├── Scripts/
│   ├── Core/
│   ├── Player/
│   ├── Weapons/
│   └── ... (остальные папки)
├── ScriptableObjects/
│   ├── Items/
│   ├── Weapons/
│   └── ... (остальные папки)
├── Prefabs/
│   ├── Player/
│   ├── Enemies/
│   └── ... (остальные папки)
└── ... (остальные основные папки)
```

---

## Урок 1.2: Создание всех сцен

### Что мы делаем
Создаем все необходимые сцены игры заранее. Это поможет лучше планировать проект и понимать структуру игры.

### Пошаговая инструкция

#### Шаг 1: Создание сцены Bootstrap
**Bootstrap** - это сцена инициализации, которая загружается первой и подготавливает все системы игры.

1. В окне **Project** перейдите в папку `Scenes`
2. Правый клик → **Create** → **Scene**
3. Назовите сцену `Bootstrap`
4. Откройте сцену (двойной клик)

**Настройка Bootstrap сцены:**
- Удалите **Main Camera** (она нам не нужна в этой сцене)
- Создайте пустой GameObject: **GameObject** → **Create Empty**
- Назовите его `BootstrapManager`
- Пока оставьте его пустым (скрипт добавим позже)

**Важно:** Bootstrap сцена должна быть первой в Build Settings (Index 0)

#### Шаг 2: Создание сцены MainMenu
**MainMenu** - главное меню игры.

1. В папке `Scenes` создайте новую сцену `MainMenu`
2. Откройте сцену

**Настройка MainMenu:**
1. **Camera:**
   - Выделите Main Camera
   - В Inspector установите:
     - Background: черный или фоновое изображение
     - Clear Flags: Solid Color

2. **Canvas (UI):**
   - **GameObject** → **UI** → **Canvas**
   - Назовите `MainMenuCanvas`
   - В компоненте Canvas:
     - Render Mode: Screen Space - Overlay
     - Canvas Scaler: Scale With Screen Size
     - Reference Resolution: 1920x1080

3. **Кнопки меню:**
   - Правый клик на Canvas → **UI** → **Button - TextMeshPro** (или обычный Button)
   - Создайте 3 кнопки:
     - `Button_NewGame` - "Новая игра"
     - `Button_LoadGame` - "Загрузить игру"
     - `Button_Quit` - "Выход"
   - Расположите кнопки по центру экрана вертикально
   - Пока оставьте кнопки без функционала (скрипты добавим позже)

4. **Фон (опционально):**
   - Можно добавить фоновое изображение или видео
   - Создайте Image: **UI** → **Image**
   - Растяните на весь экран
   - Добавьте текстуру фона

#### Шаг 3: Создание сцены GameScene
**GameScene** - основная игровая сцена, где происходит весь геймплей.

1. Создайте новую сцену `GameScene` в папке Scenes
2. Откройте сцену

**Настройка GameScene:**

1. **Освещение:**
   - Оставьте Directional Light (направленный свет)
   - Настройте цвет и интенсивность по желанию

2. **Земля/Пол:**
   - **GameObject** → **3D Object** → **Plane** (для 3D)
   - Или **GameObject** → **2D Object** → **Sprite** (для 2D)
   - Назовите `Ground` или `Floor`
   - Растяните до нужного размера
   - Добавьте Material (можно создать простой материал в папке Materials)

3. **EventSystem (для UI):**
   - **GameObject** → **UI** → **Event System**
   - Нужен для работы UI элементов

4. **Canvas для HUD:**
   - **GameObject** → **UI** → **Canvas**
   - Назовите `HUDCanvas`
   - Настройки:
     - Render Mode: Screen Space - Overlay
     - Canvas Scaler: Scale With Screen Size
   - Пока оставьте пустым (HUD добавим позже)

5. **Canvas для меню паузы:**
   - Создайте еще один Canvas: `PauseMenuCanvas`
   - Настройки такие же, как у HUDCanvas
   - По умолчанию отключите (галочка в Inspector)
   - Внутри создайте панель: **UI** → **Panel**
   - Назовите `PausePanel`
   - Внутри панели создайте кнопки:
     - "Продолжить"
     - "Настройки"
     - "Сохранить"
     - "Главное меню"

6. **GameManager:**
   - Создайте пустой GameObject `GameManager`
   - Пока оставьте пустым (скрипт добавим позже)

7. **Player (временный):**
   - Создайте **3D Object** → **Capsule** (для 3D)
   - Или **2D Object** → **Sprite** (для 2D)
   - Назовите `Player`
   - Позиция: (0, 1, 0) для 3D или (0, 0, 0) для 2D
   - Это временный объект, позже заменим на полноценного игрока

### Советы и рекомендации

#### Для 2D игр
- Используйте **Sprite Renderer** вместо Mesh Renderer
- Для камеры установите **Orthographic** (ортографическая проекция)
- Размер камеры (Size) обычно 5-10 единиц

#### Для разных жанров
- **RPG**: Добавьте несколько зон (зона города, зона боя, зона босса)
- **Платформер**: Добавьте платформы и препятствия
- **Открытый мир**: Используйте Terrain вместо Plane для больших пространств

#### Настройка Build Settings
1. **File** → **Build Settings**
2. Добавьте сцены в правильном порядке:
   - **Bootstrap** (Index 0) - должна быть первой!
   - **MainMenu** (Index 1)
   - **GameScene** (Index 2)
3. Перетащите сцены из Project в окно Build Settings

**Важно:** Порядок сцен важен! Bootstrap должна загружаться первой.

---

## Урок 1.3: Создание базовых префабов

### Что мы делаем
Создаем заготовки префабов для основных объектов игры. Префабы - это готовые объекты, которые можно переиспользовать.

### Пошаговая инструкция

#### Шаг 1: Префаб Player
1. В сцене GameScene найдите объект `Player` (который мы создали ранее)
2. Настройте его базовые параметры:
   - **Transform**: Position (0, 1, 0), Rotation (0, 0, 0), Scale (1, 1, 1)
   - **Collider**: Добавьте компонент (Capsule Collider для 3D или Box Collider 2D для 2D)
   - **Tag**: Установите тег "Player" (если еще не установлен)
     - Выделите объект → Inspector → Tag → Add Tag → создайте "Player"

3. Создайте префаб:
   - Перетащите объект Player из Hierarchy в папку `Assets/Prefabs/Player`
   - Назовите префаб `Player`
   - Синий цвет объекта в Hierarchy означает, что это префаб

#### Шаг 2: Префаб Enemy_Base
1. В сцене GameScene создайте:
   - **3D Object** → **Capsule** (для 3D)
   - Или **2D Object** → **Sprite** (для 2D)
2. Назовите `Enemy_Base`
3. Настройте:
   - Можете изменить цвет материала (красный для врага)
   - Добавьте Collider
   - Tag: "Enemy" (создайте тег, если нужно)
4. Создайте префаб в `Assets/Prefabs/Enemies/Enemy_Base`

#### Шаг 3: Префаб NPC_Base
1. Создайте объект (Capsule или Sprite)
2. Назовите `NPC_Base`
3. Настройте:
   - Можете изменить цвет (желтый для NPC)
   - Добавьте Collider
   - Tag: "NPC"
4. Создайте префаб в `Assets/Prefabs/NPCs/NPC_Base`

#### Шаг 4: Префаб Canvas_HUD
1. В сцене GameScene найдите `HUDCanvas`
2. Создайте префаб:
   - Перетащите HUDCanvas в `Assets/Prefabs/UI/Canvas_HUD`
3. **Важно:** После создания префаба, удалите Canvas из сцены (мы будем создавать его программно)

### Советы и рекомендации

#### Организация префабов
- Используйте понятные имена: `Enemy_Goblin`, `Weapon_Sword`, а не `enemy1`, `sword1`
- Группируйте по типам в подпапках
- Версионируйте при необходимости: `Player_v1`, `Player_v2`

#### Для разных жанров
- **RPG**: Создайте префабы для разных типов врагов (Goblin, Orc, Skeleton)
- **Платформер**: Создайте префабы платформ и препятствий
- **Шутер**: Создайте префабы для пуль и взрывов

#### Работа с префабами
- **Редактирование**: Двойной клик на префаб в Project откроет режим редактирования
- **Применение изменений**: После редактирования нажмите "Apply" в Inspector
- **Разъединение**: Overrides → Unpack Prefab - если нужно отделить от префаба

---

## Проверка выполнения этапа

После завершения всех уроков проверьте:

### ✅ Структура папок
- [ ] Все основные папки созданы
- [ ] Подпапки в Scripts созданы
- [ ] Подпапки в ScriptableObjects созданы
- [ ] Подпапки в Prefabs созданы

### ✅ Сцены
- [ ] Bootstrap сцена создана и настроена
- [ ] MainMenu сцена создана с UI
- [ ] GameScene сцена создана с базовыми объектами
- [ ] Сцены добавлены в Build Settings в правильном порядке

### ✅ Префабы
- [ ] Player префаб создан
- [ ] Enemy_Base префаб создан
- [ ] NPC_Base префаб создан
- [ ] Canvas_HUD префаб создан

### ✅ Теги (Tags)
- [ ] Тег "Player" создан
- [ ] Тег "Enemy" создан
- [ ] Тег "NPC" создан

---

## Частые ошибки и их решение

### Ошибка 1: "Scene не найдена"
**Проблема:** Сцена не загружается при запуске игры
**Решение:** Проверьте Build Settings - все сцены должны быть добавлены, Bootstrap должна быть первой

### Ошибка 2: "Prefab connection lost"
**Проблема:** Префаб потерял связь с оригиналом
**Решение:** Выделите объект в сцене → Inspector → Overrides → Revert All

### Ошибка 3: "UI не работает"
**Проблема:** Кнопки не реагируют на клики
**Решение:** Убедитесь, что в сцене есть EventSystem (GameObject → UI → Event System)

---

## Дополнительные ресурсы

### Полезные горячие клавиши Unity
- `Ctrl+Shift+N` - создать папку
- `Ctrl+N` - создать скрипт
- `F` - сфокусироваться на выделенном объекте
- `Ctrl+D` - дублировать объект
- `Ctrl+S` - сохранить сцену

### Рекомендации по организации
1. **Регулярно сохраняйте:** `Ctrl+S` для сцены, `Ctrl+Shift+S` для всех сцен
2. **Используйте версионный контроль:** Git поможет отслеживать изменения
3. **Комментируйте:** В названиях объектов используйте понятные имена

---

## Что дальше?

После завершения Этапа 1 мы перейдем к **Этапу 2: Ядро игры (Core Systems)**, где создадим:
- BootstrapManager для инициализации
- GameManager для управления состоянием игры
- EventSystem для связи компонентов
- SceneManager для переключения сцен

**Важно:** Не переходите к следующему этапу, пока не убедитесь, что все работает корректно!

---

## Вопросы для самопроверки

1. Почему Bootstrap сцена должна быть первой в Build Settings?
2. Зачем нужны префабы вместо обычных объектов?
3. Какая разница между Canvas в режиме Screen Space и World Space?
4. Зачем нужен EventSystem в сцене?

**Ответы:**
1. Bootstrap инициализирует все системы игры перед загрузкой других сцен
2. Префабы позволяют переиспользовать объекты и легко обновлять их во всех местах использования
3. Screen Space - UI поверх игры, World Space - UI как часть игрового мира
4. EventSystem обрабатывает события ввода (клики, наведение) для UI элементов
