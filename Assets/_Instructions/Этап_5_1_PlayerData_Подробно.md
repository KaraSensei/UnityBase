# Урок 5.1: PlayerData — ScriptableObject с базовыми данными игрока

## 1. Цели урока

- **Техническая цель**: создать ScriptableObject `PlayerData`, который хранит базовые параметры игрока (здоровье, мана, скорость, сила прыжка и т.д.).
- **Обучающая цель**: показать разделение **данных** и **логики** и познакомить с `ScriptableObject` как формой хранения данных.

После выполнения урока у тебя будет отдельный файл‑данные `PlayerData_Default.asset`, который можно назначать разным префабам игрока.

---

## 2. Что такое PlayerData и зачем он нужен

### 2.1. Проблема без PlayerData

Если все параметры игрока (здоровье, скорость, прыжок и т.п.) хранить прямо в компонентах на `Player`, возникают проблемы:

- При изменении баланса нужно заходить в каждую сцену и каждый префаб.
- Нельзя легко сделать несколько разных “классов” игрока (рыцарь, вор, маг).
- Данные смешиваются с логикой — класс, который что‑то делает, одновременно хранит и “сырые числа”.

### 2.2. Решение: ScriptableObject PlayerData

`PlayerData` будет:

- **ScriptableObject**, то есть отдельный ассет‑файл в проекте.
- Хранить только **данные по умолчанию**:
  - максимальное здоровье;
  - максимальную ману/энергию;
  - базовую скорость движения;
  - силу прыжка;
  - дополнительные параметры (ускорение, скорость поворота и т.д.).

Логика работы с этими данными (урон, лечение, движение) будет находиться в других классах (`PlayerStats`, `PlayerController`).

**Принцип ООП:** разделение ответственности — `PlayerData` отвечает за данные, другие классы — за поведение.

---

## 3. Подготовка папок

1. В Unity открой окно `Project`.
2. Убедись, что у тебя есть папка:
   - `Assets/Scripts/Player/` — для скриптов, связанных с игроком.
3. Создай папку для ScriptableObject игрока:
   - `Assets/ScriptableObjects/Player/`
   - Если папки `ScriptableObjects` или `Player` нет, создай их:
     - ПКМ по `Assets` → `Create` → `Folder` → `ScriptableObjects`
     - ПКМ по `ScriptableObjects` → `Create` → `Folder` → `Player`

---

## 4. Создание скрипта PlayerData

### 4.1. Шаги в Unity

1. В окне `Project` перейди в папку `Assets/Scripts/Player/`.
2. ПКМ → `Create` → `C# Script`.
3. Назови скрипт **`PlayerData`** (точно так же, как имя класса).
4. Дважды кликни по скрипту, чтобы открыть его в редакторе (Visual Studio, Rider, VS Code и т.п.).

### 4.2. Что нужно сделать в коде

Сейчас Unity создала заготовку класса как `MonoBehaviour`. Тебе нужно:

1. Изменить наследование с `MonoBehaviour` на `ScriptableObject`.
2. Добавить атрибут `CreateAssetMenu`, чтобы можно было создавать `PlayerData` через меню `Create`.
3. Добавить **публичные поля** для базовых параметров игрока.

Ниже приведён пример того, что должно получиться. Используй его как ориентир, но набирай код **самостоятельно**, понимая, что ты делаешь.

```csharp
using UnityEngine;

// Атрибут, позволяющий создавать этот ScriptableObject через меню Create
[CreateAssetMenu(
    fileName = "PlayerData",
    menuName = "Game Data/Player Data",
    order = 0)]
public class PlayerData : ScriptableObject
{
    [Header("Основные характеристики")]
    [Min(1f)]
    public float maxHealth = 100f;

    [Min(0f)]
    public float maxMana = 50f;

    [Header("Движение")]
    [Min(0f)]
    public float moveSpeed = 5f;

    [Min(0f)]
    public float jumpForce = 5f;

    [Header("Дополнительные параметры движения")]
    [Min(0f)]
    public float acceleration = 10f;

    [Min(0f)]
    public float rotationSpeed = 720f; // градусов в секунду
}
```

Разбор кода:

- `ScriptableObject` — базовый класс для ассетов‑данных.
- `[CreateAssetMenu]` — появляется пункт в меню **Create → Game Data → Player Data**.
- `[Header]` и `[Min]` — атрибуты только для удобства в Inspector.

---

## 5. Создание экземпляра PlayerData в проекте

Теперь нужно создать **конкретный объект данных** на основе этого класса.

1. В окне `Project` перейди в `Assets/ScriptableObjects/Player/`.
2. ПКМ в пустой области → `Create` → `Game Data` → `Player Data` (название меню зависит от `menuName` в атрибуте).
3. Назови ассет **`PlayerData_Default`**.
4. Выбери `PlayerData_Default` и в Inspector выставь значения:
   - `Max Health` — например, `100`.
   - `Max Mana` — `50` или `0`, если мана пока не используется.
   - `Move Speed` — `5`.
   - `Jump Force` — `5`.
   - `Acceleration` — `10`.
   - `Rotation Speed` — `720`.

Эти значения — стартовые и могут позже изменяться под баланс игры.

---

## 6. Как PlayerData будет использоваться дальше

На следующих уроках:

- `PlayerStats` будет ссылаться на `PlayerData_Default` и в `Awake/Start` брать оттуда стартовые значения (здоровье, мана).
- `PlayerController` будет использовать скорость и другие параметры для расчёта движения.
- `PlayerProgression` сможет изменять максимальные значения при повышении уровня (либо через дополнительные бонусы, либо изменяя данные на лету — это хороший повод поговорить про плюсы/минусы изменения ScriptableObject во время игры).

Важно: сам `PlayerData` **не знает**, как использовать эти числа. Он только их хранит.

---

## 7. Мини‑проверка

1. Убедись, что:
   - Класс `PlayerData` наследуется от `ScriptableObject`, а не от `MonoBehaviour`.
   - В проекте есть ассет `PlayerData_Default` в `Assets/ScriptableObjects/Player/`.
2. Попробуй:
   - Поменять `maxHealth` в `PlayerData_Default`.
   - Запомнить, что позже (когда подключим `PlayerStats`) изменение этого числа будет менять стартовое здоровье игрока во всех сценах, где используется этот `PlayerData`.

Если всё это готово — можно переходить к уроку 5.2 (`PlayerStats`).

